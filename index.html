<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="仰天大笑出门去 我辈岂是蓬蒿人">
<meta property="og:type" content="website">
<meta property="og:title" content="ifunnyy">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ifunnyy">
<meta property="og:description" content="仰天大笑出门去 我辈岂是蓬蒿人">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ifunnyy">
<meta name="twitter:description" content="仰天大笑出门去 我辈岂是蓬蒿人">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: false,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>ifunnyy</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?95e48dc1b0014483f90b963827cc265d";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">ifunnyy</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/KVC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/KVC/" itemprop="url">KVC</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><p>KVC是Key-value coding的缩写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (id)valueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">- (void)setValue:(id)value forKey:(NSString *)key;</span><br></pre></td></tr></table></figure>
<h1 id="valueForKey实现逻辑"><a href="#valueForKey实现逻辑" class="headerlink" title="valueForKey实现逻辑"></a>valueForKey实现逻辑</h1><p><img src="/2019/01/31/objective-c/KVC/DA2C8749-9361-42F9-91A0-4CFE33CF234B.png" alt="DA2C8749-9361-42F9-91A0-4CFE33CF234B"></p>
<ol>
<li>系统会判断通过这个key访问的实例变量是否有相应的get方法，有则调用并返回。</li>
<li>没有则会判断实例变量是否存在，存在则获取值并返回。</li>
<li>不存在则会调用valueForUndefinedKey:方法并抛出NSUndefinedKeyException这个未定义key的异常。</li>
</ol>
<blockquote>
<p>关于实例变量是否存在，系统提供了一个可屏蔽的开关+ (BOOL)accessInstanceVariablesDirctly，这个方法默认实现返回的是YES，也就是说与我们这个key相同或者相似的一个成员变量是存在的，那我们认为这个成员变量是存在的，如果我们重写这个方法返回NO，即使我们访问这个key同名的成员变量是存在的，那么我们也没有办法通过这个key去获取对应的值。</p>
</blockquote>
<h2 id="Accessor-Method-is-exist-（访问器方法是否存在）"><a href="#Accessor-Method-is-exist-（访问器方法是否存在）" class="headerlink" title="Accessor Method is exist （访问器方法是否存在）"></a>Accessor Method is exist （访问器方法是否存在）</h2><p>遵循key相同或者相似原则</p>
<ul>
<li><getkey>    get方法，满足驼峰命名</getkey></li>
<li><key>        属性名称</key></li>
<li><iskey>     对应的成员变量</iskey></li>
</ul>
<h2 id="Instance-var-（实例变量）"><a href="#Instance-var-（实例变量）" class="headerlink" title="Instance var （实例变量）"></a>Instance var （实例变量）</h2><p>同名的实例变量或者相似名称的成员变量</p>
<ul>
<li>_key</li>
<li>_isKey</li>
<li>key</li>
<li>isKey</li>
</ul>
<h1 id="setValue-ForKey-实现逻辑"><a href="#setValue-ForKey-实现逻辑" class="headerlink" title="setValue:ForKey:实现逻辑"></a>setValue:ForKey:实现逻辑</h1><p><img src="/2019/01/31/objective-c/KVC/389857C5-75F4-4B27-913C-39D93D39C9F5.png" alt="389857C5-75F4-4B27-913C-39D93D39C9F5"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/KVO/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/KVO/" itemprop="url">KVO</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><ul>
<li>KVO是Key-value observing的缩写。</li>
<li>KVO是Objective-C对<font color="red">观察者设计模式</font>的又一实现。</li>
<li><p>Apple使用了isa混写（<font color="red">isa-swizzling</font>）来实现KVO。</p>
<h1 id="机制和原理"><a href="#机制和原理" class="headerlink" title="机制和原理"></a>机制和原理</h1></li>
</ul>
<p><img src="/2019/01/31/objective-c/KVO/1FB3AECC-19BC-4F08-823E-8504AE7F0E71.png" alt="1FB3AECC-19BC-4F08-823E-8504AE7F0E71"></p>
<ol>
<li><p>当我们注册一个对象的观察者，实际上是调用了系统的addObserver:forKeyPath…这样的方法。</p>
</li>
<li><p>调用了addObserver:forkeyPath…方法后，系统会在运行时动态创建一个NSKVONotifying_Class。</p>
</li>
<li><p>然后会将原来Class的isa指针指向新创建的NSKVONitifying_Class这个类。（这种实际上就是isa-swizzling的标志）</p>
</li>
<li><p>NSKVONitifying_Class实际上Class的子类，这样子是为了重写Class的Setter方法。</p>
</li>
<li><p>NSKVONitifying_Class通过重写Class的Setter方法来达到可以通知所有观察者的目的。</p>
</li>
</ol>
<blockquote>
<p>（面试题）isa混写技术（isa-swizzling）在KVO是怎么样体现的</p>
<p>​    当我们调用addObserve:forKeyPath:之后，系统会在运行时动态创建一个NSKVONitifying这么一个    类。同时将原来类的isa指针指向新创建的类。</p>
</blockquote>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><h2 id="KVO实践代码"><a href="#KVO实践代码" class="headerlink" title="KVO实践代码"></a>KVO实践代码</h2><p>MObject</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface MObject : NSObject</span><br><span class="line">@property (nonatomic, assign) int value;</span><br><span class="line">@end</span><br><span class="line">    </span><br><span class="line">#import &quot;MObject.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation MObject</span><br><span class="line">- (instancetype)init</span><br><span class="line">&#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        _value = 0;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (void)plusOne</span><br><span class="line">&#123;</span><br><span class="line">    _value++;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>MObserver</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line"></span><br><span class="line">@interface MObserver : NSObject</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">#import &quot;MObserver.h&quot;</span><br><span class="line">#import &quot;MObject.h&quot;</span><br><span class="line"></span><br><span class="line">@implementation MObserver</span><br><span class="line"></span><br><span class="line">- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context</span><br><span class="line">&#123;</span><br><span class="line">    // 判断类和判断keyPath</span><br><span class="line">    if ([object isKindOfClass:[MObject class]] &amp;&amp; [keyPath isEqualToString:@&quot;value&quot;]) &#123;</span><br><span class="line">        NSNumber *valueNum = change[NSKeyValueChangeNewKey];</span><br><span class="line">        NSLog(@&quot;valueNum = %@&quot;, valueNum);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@end</span><br></pre></td></tr></table></figure>
<p>AppDelegate</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">    // Override point for customization after application launch.</span><br><span class="line">    </span><br><span class="line">    MObject *mObj = [[MObject alloc] init];</span><br><span class="line">    MObserver *mObserver = [[MObserver alloc] init];</span><br><span class="line">    </span><br><span class="line">    // 调用kvo方法监听obj的value属性的变化</span><br><span class="line">    [mObj addObserver:mObserver forKeyPath:@&quot;value&quot; options:NSKeyValueObservingOptionNew context:NULL];</span><br><span class="line">    </span><br><span class="line">    // 调用setter方法</span><br><span class="line">    mObj.value = mObj.value + 1;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p><code>断点调试</code>（证明系统会在运行时动态创建一个NSKVONotifying_Class）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 在[mObj addObserver:mObserver forKeyPath:@&quot;value&quot; options:NSKeyValueObservingOptionNew context:NULL];前断点，在控制台输入:</span><br><span class="line">	po object_getClassName(mObj)</span><br><span class="line">// 返回:</span><br><span class="line">	&quot;MObject&quot;</span><br><span class="line">	</span><br><span class="line">// 在[mObj addObserver:mObserver forKeyPath:@&quot;value&quot; options:NSKeyValueObservingOptionNew context:NULL];后断点，在控制台输入:</span><br><span class="line">	po object_getClassName(mObj)</span><br><span class="line">// 返回:</span><br><span class="line">	&quot;NSKVONotifying_MObject&quot;</span><br></pre></td></tr></table></figure>
<h2 id="重写的Setter添加的方法"><a href="#重写的Setter添加的方法" class="headerlink" title="重写的Setter添加的方法"></a>重写的Setter添加的方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)willChangeValueForKey:(NSString *)key;</span><br><span class="line"></span><br><span class="line">- (void)didChangeValueForKey:(NSString *)key;</span><br></pre></td></tr></table></figure>
<p>NSKVONotifying_Class的setter实现</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)setValue:(id)obj</span><br><span class="line">&#123;</span><br><span class="line">    [self willChangeValueForKey:@&quot;keyPath&quot;];</span><br><span class="line">    </span><br><span class="line">    // 调用父类实现，也即原来的实现</span><br><span class="line">    [super setValue:obj];</span><br><span class="line">    </span><br><span class="line">    [self didChangeValueForKey:@&quot;keyPath&quot;];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>（面试题）通过kvc设置value能否生效？</p>
<p>​    可以</p>
<p>（面试题）为什么通过kvc设置value能够生效？</p>
<p>​    用kvc设置最终会到value的setter方法</p>
</blockquote>
<blockquote>
<p>（面试题）通过成员变量直接复制value能否生效？</p>
<p>​    不可以，比如_value += 1;</p>
<p>​    但是可以手动达到kvo的效果，比如：</p>
<p>​    - (void)pulsOne</p>
<p>​    {</p>
<p>​        [self willChangeValueForKey:@”value”];</p>
<p>​        _value += 1;</p>
<p>​        [self didChangeValueForKey:@”value”];</p>
<p>​    }</p>
</blockquote>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul>
<li>使用setter方法改变之KVO才会生效。</li>
<li>使用setValue:forKey:改变值KVO才会生效。</li>
<li>成员变量直接修改需<font color="red">手动添加</font>KVO才会生效。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/Objective-C面试总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/Objective-C面试总结/" itemprop="url">Objective-C面试总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="技术要点"><a href="#技术要点" class="headerlink" title="技术要点"></a>技术要点</h1><p><img src="/2019/01/31/objective-c/Objective-C面试总结/0E637EBC-F541-4B4B-8BC5-D325F92746F7.png" alt="0E637EBC-F541-4B4B-8BC5-D325F92746F7"></p>
<h1 id="笔试面试题"><a href="#笔试面试题" class="headerlink" title="笔试面试题"></a>笔试面试题</h1><h2 id="MRC下如何重写retain修饰变量的setter方法？"><a href="#MRC下如何重写retain修饰变量的setter方法？" class="headerlink" title="MRC下如何重写retain修饰变量的setter方法？"></a>MRC下如何重写retain修饰变量的setter方法？</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatiomic, retain) id obj;</span><br><span class="line">- (void)setObj:(id)obj &#123;</span><br><span class="line">    // 为啥要加这个判断，因为如果obj是_obj的话，在下面[_obj release]的时候就会把自己本身给释放掉，这时候程序就会出现异常奔溃。</span><br><span class="line">    if (_obj != obj) &#123;</span><br><span class="line">        [_obj release];</span><br><span class="line">        _obj = [obj retain];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="请简述分类实现原理"><a href="#请简述分类实现原理" class="headerlink" title="请简述分类实现原理"></a>请简述分类实现原理</h2><p>分类实现原理是由运行时来决议的，然后不同分类含有同名方法最后由谁实现取决于最后参与编译的是哪个分类，如果分类添加的方法刚好是宿主类的同名方法，那分类方法会覆盖宿主类的同名方法，这里的覆盖只是由于消息传递的过程中优先查找数组靠前位置的同名方法。实际上宿主类同名方法是存在的。</p>
<h2 id="KVO内部实现原理"><a href="#KVO内部实现原理" class="headerlink" title="KVO内部实现原理"></a>KVO内部实现原理</h2><p>比如某个类调用addObserver:forKeyPath:这个方法后，系统就会在运行时动态创建该类的一个派生类NSNotifying，这个派生类会重写基类中任何被观察属性的setter方法。通过重写的setter方法实现真正的通知机制。(A-&gt;NSNotifying_A)</p>
<h2 id="Foundation对象与Core-Foundation对象有什么区别"><a href="#Foundation对象与Core-Foundation对象有什么区别" class="headerlink" title="Foundation对象与Core Foundation对象有什么区别"></a>Foundation对象与Core Foundation对象有什么区别</h2><ul>
<li>Foundation对象是OC的，Core Foundation对象是C对象的</li>
<li>数据类型之间的转换<ul>
<li>ARC: <code>__bridge_retained</code>、<code>__bridge_transfer</code></li>
<li>非ARC：<code>__bridge</code></li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/代理（Delegate）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/代理（Delegate）/" itemprop="url">代理（Delegate）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h1><ul>
<li>准确的说是一种软件设计模式，代理模式。</li>
<li>iOS当中以@protocol形式体现。</li>
<li>传递方式一对一。</li>
</ul>
<h1 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h1><p><img src="/2019/01/31/objective-c/代理（Delegate）/87C791CA-59A6-4E99-94DF-1D651AC292F5.png" alt="87C791CA-59A6-4E99-94DF-1D651AC292F5"></p>
<blockquote>
<p>（面试题）代理中的方法是必须实现的么</p>
<p>​    不一定，看方法的标识，如果是@required的话就是必须实现，@optional就是可选实现。</p>
</blockquote>
<h1 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h1><ul>
<li><p>一般代理的声明为weak，以规避循环引用。</p>
<p><img src="/2019/01/31/objective-c/代理（Delegate）/DE364D42-639E-4A37-A50E-C535116F815E.png" alt="DE364D42-639E-4A37-A50E-C535116F815E"></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/关联对象（Associations）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/关联对象（Associations）/" itemprop="url">关联对象（Associations）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="关联对象作用"><a href="#关联对象作用" class="headerlink" title="关联对象作用"></a>关联对象作用</h1><ul>
<li>使用关联对象可以给分类添加“成员变量”。</li>
<li>为现有的类添加私有变量以帮助实现细节。</li>
<li>为现有的类添加公有属性</li>
<li>为 <code>KVO</code> 创建一个关联的观察者</li>
</ul>
<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 通过指定的key去object对象中读取关联值</span></span><br><span class="line"><span class="keyword">id</span> objc_getAssociatedObject(<span class="keyword">id</span> object, <span class="keyword">const</span> <span class="keyword">void</span> *key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 存入一个值，使这个值和key相映射，然后把这个映射关系通过policy关联到object对象上，传入nil则移除已有的关联对象</span></span><br><span class="line"><span class="keyword">void</span> objc_setAssociatedObject(<span class="keyword">id</span> object, <span class="keyword">const</span> <span class="keyword">void</span> *key, <span class="keyword">id</span> value, objc_AssociationPolicy policy);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 根据指定对象去移除它所有的关联对象，慎用，因为这样会移除掉别人添加的关联对象</span></span><br><span class="line"><span class="keyword">void</span> objc_removeAssociatedObjects(<span class="keyword">id</span> object)</span><br></pre></td></tr></table></figure>
<h1 id="关联对象的本质"><a href="#关联对象的本质" class="headerlink" title="关联对象的本质"></a>关联对象的本质</h1><p>关联对象由系统提供的<strong><font color="red">AssociationsManager</font></strong>管理并在<strong><font color="red">AssociationsHashMap</font></strong>存储。</p>
<p>所有对象的关联内容都在<strong><font color="red">同一个全局容器</font></strong>中。</p>
<blockquote>
<p>（面试题）用关联对象实现的为分类添加的“成员变量”储存到哪？</p>
<p>​    都放在AssocationsManager里面的AssociationHashMap存储。并且所有的关联内容无论是为哪个分类创建的对象都会放在同一个全局容器里面。    </p>
</blockquote>
<p><img src="/2019/01/31/objective-c/关联对象（Associations）/1B3B51E3-593E-4351-9029-F31841E8BAFC.png" alt="1B3B51E3-593E-4351-9029-F31841E8BAFC"></p>
<p><img src="/2019/01/31/objective-c/关联对象（Associations）/867F84EF-F895-4625-B29C-18786B329B09.png" alt="867F84EF-F895-4625-B29C-18786B329B09"></p>
<h1 id="关联策略"><a href="#关联策略" class="headerlink" title="关联策略"></a>关联策略</h1><table>
<thead>
<tr>
<th>关联策略</th>
<th>等价属性</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>OBJC_ASSOCIATION_ASSIGN</td>
<td>@property (assign) or @property (unsafe_unretained)</td>
<td>弱引用关联对象</td>
</tr>
<tr>
<td>OBJC_ASSOCIATION_RETAIN_NONATOMIC</td>
<td>@property (strong, nonatomic)</td>
<td>强引用关联对象，且为非原子操作</td>
</tr>
<tr>
<td>OBJC_ASSOCIATION_COPY_NONATOMIC</td>
<td>@property (copy, nonatomic)</td>
<td>复制关联对象，且为非原子操作</td>
</tr>
<tr>
<td>OBJC_ASSOCIATION_RETAIN</td>
<td>@property (strong, atomic)</td>
<td>强引用关联对象，且为原子操作</td>
</tr>
<tr>
<td>OBJC_ASSOCIATION_COPY</td>
<td>@property (copy, atomic)</td>
<td>复制关联对象，且为原子操作</td>
</tr>
</tbody>
</table>
<h1 id="const-void-key"><a href="#const-void-key" class="headerlink" title="const void *key"></a>const void *key</h1><p><code>const void *key</code>类型通常都是通常都是会采用静态变量来作为关键字，可以自己创建，也可以使用<code>@selector(XXX)</code>。</p>
<p>第一种</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keyword">char</span> nameKey;</span><br><span class="line"></span><br><span class="line">objc_setAssociatedObject(<span class="keyword">self</span>, &amp;nameKey, name,  OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br></pre></td></tr></table></figure>
<p>第二种</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">objc_setAssociatedObject(self, @selector(function), name,  OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">// 或者</span><br><span class="line">objc_setAssociatedObject(self, _cmd, name,  OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">// _cmd的作用域只在当前方法里，直指当前方法名@selector。</span><br></pre></td></tr></table></figure>
<h1 id="DEMO"><a href="#DEMO" class="headerlink" title="DEMO"></a>DEMO</h1><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIButton+Block.h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;UIKit/UIKit.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">void</span> (^btnBlock)(<span class="keyword">id</span> sender);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIButton</span> (<span class="title">Block</span>)</span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)handelWithBlock:(btnBlock)block;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// UIButton+Block.m</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#import <span class="meta-string">"UIButton+Block.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)handelWithBlock:(btnBlock)block &#123;</span><br><span class="line">    <span class="keyword">if</span> (block) &#123;</span><br><span class="line">        <span class="comment">// @selector(btnAction:)</span></span><br><span class="line">        objc_setAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(btnAction:), block,  OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span> addTarget:<span class="keyword">self</span> action:<span class="keyword">@selector</span>(btnAction:) forControlEvents:<span class="built_in">UIControlEventTouchUpInside</span>];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)btnAction:(<span class="keyword">id</span>)sender &#123;</span><br><span class="line">    btnBlock block = objc_getAssociatedObject(<span class="keyword">self</span>, <span class="keyword">@selector</span>(btnAction:));</span><br><span class="line">    <span class="keyword">if</span> (block) &#123;</span><br><span class="line">        block(sender);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/扩展（Extension）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/扩展（Extension）/" itemprop="url">扩展（Extension）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="扩展能做什么"><a href="#扩展能做什么" class="headerlink" title="扩展能做什么"></a>扩展能做什么</h1><ul>
<li>声明私有属性</li>
<li>声明私有变量</li>
<li>声明私有成员变量</li>
</ul>
<h1 id="扩展特点"><a href="#扩展特点" class="headerlink" title="扩展特点"></a>扩展特点</h1><ul>
<li>编译时决议。</li>
<li>只以声明的形式存在，多数情况下寄生于宿主类的.m中。</li>
<li>不能为系统类添加扩展。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/分类（Category）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/分类（Category）/" itemprop="url">分类（Category）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="分类做了那些事"><a href="#分类做了那些事" class="headerlink" title="分类做了那些事"></a>分类做了那些事</h1><ul>
<li>声明私有方法</li>
<li>分解体积庞大的类文件</li>
<li>把framework的私有方法公开</li>
</ul>
<h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><ul>
<li>运行时决议，通过runtime添加</li>
<li>可以为系统类添加分类</li>
</ul>
<h1 id="分类中都可以添加那些内容"><a href="#分类中都可以添加那些内容" class="headerlink" title="分类中都可以添加那些内容"></a>分类中都可以添加那些内容</h1><ul>
<li>实例方法</li>
<li>类方法</li>
<li>协议</li>
<li>属性（<strong>在分类中定义属性，实际上只是声明对应的get方法和set方法，并没有为我们在类中添加示实例变量</strong>）</li>
<li>成员变量（<strong>使用关联对象技术</strong>）</li>
</ul>
<blockquote>
<p>（面试题）分类有多个的情况下，各个分类都有一个同名的实例方法，最终哪个会失效</p>
<p>​    最后编译的分类当中的方法会生效</p>
</blockquote>
<h1 id="分类源码结构"><a href="#分类源码结构" class="headerlink" title="分类源码结构"></a>分类源码结构</h1><p><img src="/2019/01/31/objective-c/分类（Category）/70449FE0-FA1D-4368-A671-3FCF141095FE.png" alt="70449FE0-FA1D-4368-A671-3FCF141095FE"></p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul>
<li>分类添加的方法可以“覆盖”原类方法</li>
<li>同名分类方法谁能生效取决于编译顺序</li>
<li>名字相同的分类会引起编译报错</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/属性关键字/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/属性关键字/" itemprop="url">属性关键字</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="属性关键字分为哪几类"><a href="#属性关键字分为哪几类" class="headerlink" title="属性关键字分为哪几类"></a>属性关键字分为哪几类</h1><ul>
<li>读写权限<ul>
<li>readonly</li>
<li>readwrite (默认)</li>
</ul>
</li>
<li>原子性<ul>
<li>atomic (默认)</li>
<li>nonatomic</li>
</ul>
</li>
<li>引用计数<ul>
<li>retain/strong (默认)<ul>
<li>retain一般在MRC中使用，strong一般在ARC中使用</li>
<li>都是用来修饰对象</li>
</ul>
</li>
<li>assign/unsafe_unretained<ul>
<li>assign: 修饰基本数据类型，如int，BOOL等。</li>
<li>assign: 修饰对象类型时，不改变其引用计数。</li>
<li>assign所修饰的对象，在被释放之后，assign指针仍指向原地址，这个时候如果通过assign指针继续访问原对象，会产生悬垂指针导致内存泄漏，程序异常。</li>
<li>unsafe_unretained在MRC中使用较多，ARC基本不用</li>
</ul>
</li>
<li>weak<ul>
<li>不改变被修饰对象的引用计数。</li>
<li>所指对象在被释放之后会自动置为nil。</li>
</ul>
</li>
<li>copy</li>
</ul>
</li>
</ul>
<blockquote>
<p>（面试题）被atomic修饰的属性有什么意义？</p>
<p>​    保证赋值和获取是线程安全的（这里的赋值和获取是对成员属性直接赋值和获取，并不包括操作访问），比如被atomic修饰的数组，对它进行赋值和获取是可以保证线程安全，但是对这个数组做操作，比如增加和移除对象，这样就不能保证线程安全。</p>
</blockquote>
<blockquote>
<p>（面试题）assign和weak他们之间的区别有哪些</p>
<p>​    一、weak可以修饰对象，而assign既可以修饰对象，也可以修饰基本数据类型。    </p>
<p>​    二、assign所修饰的对象被释放后，assign指针仍指向原来的内存地址，而weak所修饰的对象被释放后，会自动设置为nil。</p>
</blockquote>
<h2 id="copy关键字要点"><a href="#copy关键字要点" class="headerlink" title="copy关键字要点"></a>copy关键字要点</h2><table>
<thead>
<tr>
<th>源对象类型</th>
<th>拷贝方式</th>
<th>目标对象类型</th>
<th>拷贝类型（深/浅）</th>
</tr>
</thead>
<tbody>
<tr>
<td>mutable对象</td>
<td>copy</td>
<td>不可变</td>
<td>深拷贝</td>
</tr>
<tr>
<td>mutable对象</td>
<td>mutableCopy</td>
<td>可变</td>
<td>深拷贝</td>
</tr>
<tr>
<td>immutable对象</td>
<td>copy</td>
<td>不可变</td>
<td>浅拷贝</td>
</tr>
<tr>
<td>immutable对象</td>
<td>mutableCopy</td>
<td>可变</td>
<td>深拷贝</td>
</tr>
</tbody>
</table>
<ul>
<li>可变对象的copy和mutableCopy都是深拷贝</li>
<li>不可变对象的copy是浅拷贝，mutableCopy是深拷贝</li>
<li>copy方法返回的都是不可变对象</li>
</ul>
<h2 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h2><p>浅拷贝就是对内存地址的复制，让目标对象指针的源对象指向<font color="red">同一片</font>内存空间。</p>
<ul>
<li>浅拷贝会增加被拷贝对象的引用计数</li>
<li>不要产生新的内存空间</li>
</ul>
<p><img src="/2019/01/31/objective-c/属性关键字/C4F93F38-0319-4BC7-842B-0D652B8DE8AD.png" alt="C4F93F38-0319-4BC7-842B-0D652B8DE8AD"></p>
<h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><p>深拷贝让目标对象指针和源对象指针指向<font color="red">两片</font>内容相同的内存空间。</p>
<ul>
<li>深拷贝不会增加被拷贝对象的引用计数</li>
<li>深拷贝产生了一个内存分配，出现了两块内存。</li>
</ul>
<p><img src="/2019/01/31/objective-c/属性关键字/68925F58-C0AF-4B94-B79E-7EC733105A06.png" alt="68925F58-C0AF-4B94-B79E-7EC733105A06"></p>
<blockquote>
<p>（面试题）说出深拷贝和浅拷贝的不同</p>
<p>​    是否开辟了新的内存空间，深拷贝会，浅拷贝不会。</p>
<p>​    是否影响引用计数，深拷贝不会，浅拷贝会。</p>
</blockquote>
<blockquote>
<p>（面试题）@property(copy)NSMutableArray* array，这样声明会产生什么问题？</p>
<p>​    会导致程序异常。</p>
<p>​    如果赋值过来的是NSMutableArray，copy之后是NSArray。</p>
<p>​    如果赋值过来的是NSArray，copy之后是NSArray。        </p>
</blockquote>
<p>​    </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/objective-c/通知（NSNotification）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/objective-c/通知（NSNotification）/" itemprop="url">通知（NSNotification）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T13:46:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/objective-c/" itemprop="url" rel="index">
                    <span itemprop="name">objective-c</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h1><ul>
<li>使用<font color="red">观察者模式</font>来实现的，用于跨层传递消息的机制。</li>
<li>传递方式为<font color="red">一对多</font>。</li>
</ul>
<p><img src="/2019/01/31/objective-c/通知（NSNotification）/8C73605E-A19B-4803-8D9A-1554FA19C1C8.png" alt="8C73605E-A19B-4803-8D9A-1554FA19C1C8"></p>
<h1 id="如何实现通知机制"><a href="#如何实现通知机制" class="headerlink" title="如何实现通知机制"></a>如何实现通知机制</h1><p>NSNotificaitioncenter内部应该是服务一个Map表或者字典，key是notificationName，value是一个数组列表Observers_list，Observers_list里面每个成员应该包含注册通知的观察者，其次还得包含关于观察者调用的方法。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/31/ios/Runtime数据结构/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Johnny">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ifunnyy">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/31/ios/Runtime数据结构/" itemprop="url">runtime数据结构</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-31T00:12:00+08:00">
                2019-01-31
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h1><ul>
<li>objc_object<ul>
<li>对象</li>
</ul>
</li>
<li>objc_class<ul>
<li>类，类对象</li>
</ul>
</li>
<li>isa指针<ul>
<li>共用体isa_t</li>
</ul>
</li>
<li>method_t<ul>
<li>方法定义</li>
</ul>
</li>
</ul>
<h2 id="objc-object"><a href="#objc-object" class="headerlink" title="objc_object"></a>objc_object</h2><p><img src="/2019/01/31/ios/Runtime数据结构/33070F0E-F45F-4BC1-AFD5-9E3176410E83.png" alt="33070F0E-F45F-4BC1-AFD5-9E3176410E83"></p>
<font color="green">平时我们使用的所有对象都是id类型的，对应runtime中objc_object结构体</font>

<ul>
<li>isa_t<ul>
<li>共用体</li>
</ul>
</li>
<li>关于isa操作相关<ul>
<li>比如通过objc_object这个结构体来获取它的isa所指向的类对象，包括通过类对象的isa指针获取它的元类对象</li>
</ul>
</li>
<li>弱引用相关<ul>
<li>比如标记一个对象是否曾经弱引用指针</li>
</ul>
</li>
<li>关联对象相关<ul>
<li>比如这个对象我们为它设置了一些关联属性和关联方法</li>
</ul>
</li>
<li>内存管理相关<ul>
<li>比如MRC下的retain和release，或者ARC和MRC下都可以用到的autoreleasepool</li>
</ul>
</li>
</ul>
<h2 id="objc-class"><a href="#objc-class" class="headerlink" title="objc_class"></a>objc_class</h2><p><img src="/2019/01/31/ios/Runtime数据结构/858A8E75-50E2-461F-B5CD-43460D412F88.png" alt="858A8E75-50E2-461F-B5CD-43460D412F88"></p>
<font color="green">OC中所使用的Class实际上对应的是runtime中objc_class这个结构体</font>

<font color="red">objc_class继承自objc_object，所以Class是个对象，类对象</font>

<ul>
<li><font color="red">Class</font> superClass<ul>
<li>指向父类对象</li>
</ul>
</li>
<li><p><font color="red">cache_t</font> cache</p>
<ul>
<li>方法缓存结构</li>
</ul>
</li>
<li><p><font color="red">class_data_bits_t</font> bits</p>
<ul>
<li>实际关于一个类定义所定义的变量、属性，包括方法都在bits里面</li>
</ul>
</li>
</ul>
<blockquote>
<p>（面试题）Class是否是对象</p>
<p>​    是，类对象，因为它继承自objc_object。</p>
</blockquote>
<h2 id="isa指针"><a href="#isa指针" class="headerlink" title="isa指针"></a>isa指针</h2><p>共用体isa_t</p>
<p><img src="/2019/01/31/ios/Runtime数据结构/507F59A9-A72C-4961-B9D6-2E7506D96C66.png" alt="507F59A9-A72C-4961-B9D6-2E7506D96C66"></p>
<font color="green">isa_t在32位或者64位架构上面，实际下都是一串32位或者64位0或者1数字</font>

<ul>
<li>指针型isa<ul>
<li>isa的值代表Class的地址</li>
</ul>
</li>
<li>非指针型isa<ul>
<li>isa的值的部分代表Class的地址</li>
<li>剩下的部分可以存储一些其他内容来达到节省内存的目的</li>
</ul>
</li>
</ul>
<h2 id="isa指向"><a href="#isa指向" class="headerlink" title="isa指向"></a>isa指向</h2><ul>
<li>关于<font color="red">对象</font>，其指向<font color="red">类对象</font>。<ul>
<li>实例   —isa—&gt;   Class</li>
<li>我们通过一个<font color="red">实例</font>去调用<font color="red">实例方法</font>，就是通过<font color="red">对象的isa指针</font>到它的<font color="red">类对象</font>进行方法查找</li>
</ul>
</li>
<li>关于<font color="red">类对象</font>，其指向<font color="red">元类对象（MeteClass）</font>。<ul>
<li>Class   —isa—&gt;   MetaClass</li>
<li>我们通过一个<font color="red">类</font>去调用<font color="red">类方法</font>，就是通过<font color="red">类对象的isa指针</font>到它的<font color="red">元类</font>去进行方法查找</li>
</ul>
</li>
</ul>
<h2 id="cache-t"><a href="#cache-t" class="headerlink" title="cache_t"></a>cache_t</h2><ul>
<li>用于<font color="red">快速</font>查找方法执行函数<ul>
<li>比如我们调用一个方法的时候，如果之前调用并缓存起来，就不用到方法列表进行遍历查找</li>
</ul>
</li>
<li>是可<font color="red">增量扩展</font>的<font color="red">哈希表</font>结构<ul>
<li>会根据存储增量去扩大内存空间</li>
<li>用哈希表是为了增加查找效率</li>
</ul>
</li>
<li>是<font color="red">局部性原理</font>的最佳应用<ul>
<li>把平时调用频次最高的方法放在缓存中</li>
<li>时间局部性是指被引用过的存储器位置很可能会被再次引用</li>
<li>空间局部性是指被引用过的存储器位置附近的数据很可能将被引用</li>
</ul>
</li>
</ul>
<p><img src="/2019/01/31/ios/Runtime数据结构/62E55D07-5139-4E95-BFEE-3673E274409E.png" alt="62E55D07-5139-4E95-BFEE-3673E274409E"></p>
<h2 id="class-data-bits-t"><a href="#class-data-bits-t" class="headerlink" title="class_data_bits_t"></a>class_data_bits_t</h2><ul>
<li><font color="red">class_data_bits_t</font>主要是对<font color="red">class_rw_t</font>的封装<ul>
<li>class_rw_t<font color="red">可读可写</font>，就说明我们可以随时创建分类来给这个类添加属性和方法</li>
</ul>
</li>
<li><font color="red">class_rw_t</font>代表了类相关的<font color="red">读写</font>信息，对<font color="red">class_ro_t</font>的封装<ul>
<li>class_ro_t<font color="red">只读</font>，当我们创建一个类的时候为它添加的成员变量和方法列表，在之后就没办法修改了</li>
</ul>
</li>
<li><font color="red">class_ro_t</font>代表了类相关的<font color="red">只读</font>信息</li>
</ul>
<h2 id="class-rw-t"><a href="#class-rw-t" class="headerlink" title="class_rw_t"></a>class_rw_t</h2><p><img src="/2019/01/31/ios/Runtime数据结构/D7BDBFEA-4BDF-4730-BB82-C954073E1433.png" alt="D7BDBFEA-4BDF-4730-BB82-C954073E1433"></p>
<font color="green">我们在为一个类添加分类的协议、属性和方法就是对应上图的protocols、properties和methods</font>

<p>protocols、properties和methods这三个结构都<font color="red">继承</font>于list_array_tt这个<font color="red">二维数组</font></p>
<h2 id="class-ro-t"><a href="#class-ro-t" class="headerlink" title="class_ro_t"></a>class_ro_t</h2><p><img src="/2019/01/31/ios/Runtime数据结构/7B5FAA7A-0985-4E79-AD36-32E0C5D5A81B.png" alt="7B5FAA7A-0985-4E79-AD36-32E0C5D5A81B"></p>
<ul>
<li>name：类名。<ul>
<li>平时我们用的NSClassFromString(@”ClassName”)，通过String获取一个类</li>
</ul>
</li>
<li>ivars：类的成员变量</li>
<li>properties：类的属性<ul>
<li><font color="red">原始定义的属性</font></li>
</ul>
</li>
<li>protocols：类遵从的协议<ul>
<li><font color="red">原始遵从的协议</font></li>
</ul>
</li>
<li>methodList：类添加的方法列表<ul>
<li><font color="red">原始定义的方法</font></li>
<li>class_ro_t的方法列表和class_rw_t的方法列表是有区别的，前者是一维数组，后者是二维数组</li>
</ul>
</li>
</ul>
<h2 id="method-t"><a href="#method-t" class="headerlink" title="method_t"></a>method_t</h2><p><img src="/2019/01/31/ios/Runtime数据结构/6D6C466F-8252-40EC-AE60-199083A66373.png" alt="6D6C466F-8252-40EC-AE60-199083A66373"></p>
<ul>
<li>IMP：无类型的函数指针，函数体。<ul>
<li>IMP指针是指向实现函数的指针, 通过SEL取得IMP, objc_msgSend来执行实现方法。</li>
</ul>
</li>
</ul>
<h2 id="Type-Encodings"><a href="#Type-Encodings" class="headerlink" title="Type Encodings"></a>Type Encodings</h2><p><img src="/2019/01/31/ios/Runtime数据结构/F7127E65-A1D1-4D2C-8DD4-ABB48969BE5C.png" alt="F7127E65-A1D1-4D2C-8DD4-ABB48969BE5C"></p>
<ul>
<li>const char *types;<ul>
<li>不可变的字符指针</li>
<li>第一位永远都是函数的返回值</li>
</ul>
</li>
</ul>
<font color="green">调用一个方法，在runtime层面上都会转成objc_msgsend这样的函数调用，函数调用的第一个参数和第二个参数是固定的，并且是不可变的，第一个参数必须是id类型的，为消息的接收者，比如self这个对象，第二个是选择器SEL。</font>

<h1 id="整体数据结构"><a href="#整体数据结构" class="headerlink" title="整体数据结构"></a>整体数据结构</h1><p><img src="/2019/01/31/ios/Runtime数据结构/64D2B528-5AD9-42C3-B109-FB012EC19DB6.png" alt="64D2B528-5AD9-42C3-B109-FB012EC19DB6"></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="Johnny" />
            
              <p class="site-author-name" itemprop="name">Johnny</p>
              <p class="site-description motion-element" itemprop="description">仰天大笑出门去 我辈岂是蓬蒿人</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">28</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">3</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder"> ifunnyy | Johnny</span>

  
</div>


  <div class="powered-by"> _(:з」∠)_</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">博客 &mdash;  v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
